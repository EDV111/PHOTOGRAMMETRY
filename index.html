<!DOCTYPE html>
<html>
<head>
	<title>GLB File Upload Example</title>
	<style>
		body {
			background-color: #000;
			color: #fff;
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			text-align: center;
		}
		h1 {
			margin-top: 50px;
		}
		#upload-btn {
			background-color: #fff;
			border: none;
			border-radius: 5px;
			color: #000;
			cursor: pointer;
			font-size: 18px;
			margin-top: 50px;
			padding: 10px 20px;
		}
		#upload-btn:hover {
			background-color: #eee;
		}
		#progress-bar {
			background-color: #444;
			border-radius: 5px;
			height: 20px;
			margin: 50px auto 0;
			overflow: hidden;
			width: 500px;
		}
		#progress {
			background-color: #5cb85c;
			height: 100%;
			text-align: center;
			transition: width 0.3s ease-in-out;
			width: 0;
		}
		canvas {
			display: block;
			margin: 50px auto;
			max-width: 100%;
		}
	</style>
</head>
<body>
	<h1>Upload Your GLB File</h1>
	<input type="file" id="file-input" style="display: none;">
	<button id="upload-btn">Import</button>
	<div id="progress-bar">
		<div id="progress"></div>
	</div>
	<canvas id="canvas"></canvas>

	<script>
		var fileInput = document.getElementById('file-input');
		var uploadBtn = document.getElementById('upload-btn');
		var progressBar = document.getElementById('progress');
		var canvas = document.getElementById('canvas');
		var gltfLoader = new THREE.GLTFLoader();

		uploadBtn.addEventListener('click', function() {
			fileInput.click();
		});

		fileInput.addEventListener('change', function() {
			var file = fileInput.files[0];
			var fileSize = file.size / 1024 / 1024;
			if (fileSize > 25) {
				alert('File size must be less than 25MB');
				return;
			}
			var reader = new FileReader();
			reader.readAsDataURL(file);
			reader.onload = function(event) {
				var dataURL = event.target.result;
				var loader = new THREE.FileLoader();
				loader.load(
					dataURL,
					function(glb) {
						scene = glb.scene;
						camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
						camera.position.z = 5;
						renderer = new THREE.WebGLRenderer({canvas: canvas, antialias: true});
						renderer.setClearColor(0x000000);
						renderer.setSize(window.innerWidth, window.innerHeight);
						animate();
					},
					function(xhr) {
						var percent = xhr.loaded / xhr.total * 100;
						progressBar.style.width = percent.toFixed(2) + '%';
					},
					function(error) {
						console.error(error);
					}
				);
			}
		});

		function animate() {
			requestAnimationFrame(animate);
			renderer.render(scene, camera);
		}
	</script>

	<script src="https://threejs.org/build/three.min.js"></script>
			<script src="https://threejs.org/build/three.min.js"></script>
		<script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
		<script>
			var scene, camera, renderer;
			function animate() {
				requestAnimationFrame(animate);
				renderer.render(scene, camera);
			}
		</script>
	</body>
</html>

